# https://github.com/catppuccin/tmux/blob/main/docs/reference/configuration.md
# https://github.com/catppuccin/tmux/discussions/317

set -g @plugin 'catppuccin/tmux#v2.1.1'

set -g @catppuccin_flavor 'mocha' # latte, frappe, macchiato or mocha

run ~/.config/tmux/plugins/tmux/catppuccin.tmux


# -a: Append the given string to the existing value (instead of replacing it).
# -g: Apply the setting globally (not just for the current session or window).
# -F: Enables format processing for the string being set.

set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""
set -g status-right " #{tmux_mode_indicator} "
set -ag status-right " #{E:@catppuccin_status_application} "
set -agF status-right " #{E:@catppuccin_status_cpu} "

set -g @catppuccin_date_time_text " %Y-%d-%m %H:%M "
set -agF status-right "#{E:@catppuccin_status_date_time}"

set -g @plugin 'tmux-plugins/tmux-cpu'
run ~/.config/tmux/plugins/tmux-plugins/tmux-cpu/cpu.tmux

set -g @catppuccin_window_current_number_color "#c9e9e7"

# every window
# See below for an explanation of the conditional
set -g @catppuccin_window_text "#{?#{==:#T,#{host}}, #W#{?window_zoomed_flag, ðŸ‘€ ,}#{?pane_synchronized, ðŸ”— ,} , #T: #W#{?window_zoomed_flag, ðŸ‘€ ,}#{?pane_synchronized, ðŸ”— ,} }"
# set -g @catppuccin_window_fill "number"
set -ogq @catppuccin_window_number " #I "
set -ogq @catppuccin_window_text_color "#{@thm_surface_0}"
set -ogq @catppuccin_window_number_color "#{@thm_overlay_2}"


set -g @catppuccin_window_current_text "#[fg=orange,bold,reverse]#{?#{==:#T,#{host}},     #W #F#{?window_zoomed_flag, ðŸ‘€ ,}#{?pane_synchronized, ðŸ”— ,}     ,     #T: #W #F#{?window_zoomed_flag, ðŸ‘€ ,}#{?pane_synchronized, ðŸ”— ,}    }"
set -ogq @catppuccin_window_current_number "#I"
set -ogq @catppuccin_window_current_text_color "#{@thm_surface_1}"
set -ogq @catppuccin_window_current_number_color "#{@thm_mauve}"

#
# Got the dull color from https://www.color-hex.com/color-palette/80211
set -g @catppuccin_window_default_color "#c9e9e7"
set -g @catppuccin_window_default_background "black"

# See https://man7.org/linux/man-pages/man1/tmux.1.html#STYLES
set -g @catppuccin_pane_border_style "fg=#{thm_white}" # Use a value compatible with the standard tmux 'pane-border-style'
set -g @catppuccin_pane_active_border_style "fg=#{thm_orange}" # Use a value compatible with the standard tmux 'pane-border-active-style'

# This tries to simulate dimming of inactive panes by using a different background color for active
# and inactive panes. This is not perfect - if neovim is one in one of the inactive pane, the
# background is unaffected by these configurations. (I have now added neovim config to dim the
# buffer when focus is lost).
# Set background color for every pane (we will use this for inactive pane)
set -g window-style 'bg=#000000'
# Set background color for active pane. This is close to the normal catppuccin mocha background
set -g window-active-style 'bg=#1E1E2E'

# only current window
# See <https://man7.org/linux/man-pages/man1/tmux.1.html> for #F #I #W etc
# <https://stackoverflow.com/questions/28376611/how-to-automatically-rename-tmux-windows-to-the-current-directory> shows
# good examples of configuring the text.
#
# Here is the conditional in plain english (you will understand this easily if you read FORMATS in tmux man page)
# if #{host} == #T {  # Current pane title is the same as hostname
#   # Use empty string
# } else {
#   # Show pane title
# }
#
# #{?condition, if-true, if-false}: A conditional operator that chooses between two outputs based on the evaluation of condition.
# #{||:A,B}: Logical OR operator. Evaluates as true if either A or B is true.
#
# #T shows pane title, #W shows window name. Current app. #F shows * for active and - for last
# Space is for better asthetics
# set -g @catppuccin_window_current_text "#[fg=orange,bold,reverse]#{?#{==:#T,#{host}},     #W #F#{?window_zoomed_flag, ðŸ‘€ ,}#{?pane_synchronized, ðŸ”— ,}     ,     #T: #W #F#{?window_zoomed_flag, ðŸ‘€ ,}#{?pane_synchronized, ðŸ”— ,}    }"
# set -g @catppuccin_window_current_text "#[fg=orange,bold,reverse]#{?#{||:#{==:#{pane_title},#{host}},#{==:#{pane_title},#{pane_current_command}}},     #{pane_current_command}#F     ,     #T: #{pane_current_command}#F     }"
# set -g @catppuccin_window_current_fill "number" # number, all , none

# To see current pane title use
# tmux display-message -p "#{pane_title}"

